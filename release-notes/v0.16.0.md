### **Release Notes for v0.16.0**

This release introduces a major overhaul of the search functionality, significantly improving performance, relevance, and user experience. It also includes several other new features, bug fixes, and enhancements across the application.

#### ‚ú® Highlights

- **New Search Engine:** Integrated **MiniSearch** to replace the previous simple search algorithm. This provides faster, more relevant search results and enables advanced features like result highlighting.
- **Enhanced Search UX:**
  - Search terms are now highlighted in conversation titles and prompts.
  - Search results now dynamically sort by "Relevance" by default when a search is active. The previous sort order is restored when the search is cleared.
  - Improved performance for search operations through optimized result mapping and debounce strategies.

#### üöÄ Features

- **Search & Filtering:**
  - `feat(filters)`: Implemented dynamic sort switching for an improved search user experience. The system now automatically switches to "Relevance" sort when a search is initiated and reverts to "Newest" (or the user's last selected sort during search) when cleared.
  - `feat`: Search terms are now highlighted directly in conversation titles and prompts within the search results, using `<mark>` tags for clear visibility. Highlighting is case-insensitive and XSS safe.
  - `feat`: Added a dedicated "Relevance" sort option that is available when performing a search.
  - `feat`: Integrated the MiniSearch library, replacing the previous simpler search algorithm for enhanced performance and accuracy, focusing searches on titles and prompts.
- **Conversations List:**
  - `feat`: Users can now see the full prompt content on preview in the conversation list.
- **Build Process:**
  - `build`: Added checksum comparison and build recording functionality to improve build consistency and tracking.
  - `build`: The `compare-checksums` script now defaults to using the current version.

#### üêõ Fixes

- **Settings:**
  - `fix(settings)`: Ensured the LoggingSettings tab consistently appears by default when opening the Settings tab.
- **Search & Filtering:**
  - `fix(search)`: Preserved the relevance order from MiniSearch in the displayed search results.
  - `fix`: Corrected an issue where the "Relevance" sort option was not appearing correctly in the filter sidebar or the sort button on the conversations list.
  - `fix`: Resolved an issue with incorrect debounce setup for search.
  - `fix`: Addressed missing brackets and an incorrect `searchDebounceTimer` variable in `DashboardHeader.vue`.
  - `fix`: Removed a stray `else if` condition in `DashboardHeader.vue`.
- **Conversations List & Previews:**
  - `fix`: Added the missing prompt preview in the conversation list.
  - `fix`: Corrected the prompt preview display to ensure it appears on a new line rather than inline.
- **Date Handling:**
  - `fix`: Added the missing `isBetween` Day.js plugin to resolve crashes related to custom date range filtering.
  - `fix`: Corrected inconsistencies between initial and reset values for custom date fields in `App.vue`.
- **Content Scripts & Model Detection:**
  - `fix`: Correctly detect the Veo model version by inspecting the tooltip HTML.
  - `fix`: Resolved an issue with a wrongly renamed `init` function in `gemini-history-main.js`.
- **General:**
  - `fix`: Addressed leftover diff markers from Copilot.
  - `fix`: Corrected duplicate variable and stats declarations in `App.vue`.

#### ‚ö° Performance Improvements

- **Search:**
  - `perf(search)`: Utilized MiniSearch's `_matches` field for more efficient result highlighting, replacing previous regex-based methods.
  - `perf(search)`: Optimized MiniSearch result mapping by using a `Map` for O(1) lookups, significantly speeding up the process of correlating search results with original history entries.
  - `perf`: Implemented a consistent 150ms debounce for search queries of 4 letters or more, and a longer delay for shorter queries to improve responsiveness.
  - `perf`: Cached the regex used for highlighting search terms to speed up subsequent searches with the same query.
- **Build Scripts:**
  - `perf(script)`: Pre-computed `all_build_numbers` in `compare_checksums.py` script to improve its execution speed.

#### üîÑ Refactoring

- **Search & Highlighting:**
  - `refactor(search)`: Improved conversation identification for highlighting by passing entry parameters directly instead of using `getCurrentInstance()`.
  - `refactor`: Restricted MiniSearch to search only through conversation titles and prompts for better focus and performance.
- **Model Detection:**
  - `refactor`: Made the Veo text detection criteria less specific to enhance resilience against future UI changes.
  - `refactor`: Extracted Veo version detection logic into a dedicated method to reduce code duplication.
- **Code Quality:**
  - `refactor`: Removed an unused variable from `DashboardHeader.vue`.
  - `refactor`: Moved an import statement to the top line in `DashboardHeader.vue`.
  - `refactor`: Removed JavaScript-based content truncation for prompt previews, relying on CSS for a cleaner implementation.

#### üìö Documentation

- `docs(jsdoc)`: Added comprehensive JSDoc comments to all major JavaScript and Vue files, enhancing code readability and maintainability.
- `docs(README)`: Significantly updated the README with:
  - Information on the new search capabilities (MiniSearch).
  - Packaging and checksum comparison steps in the setup instructions.
  - Improved structure with collapsible sections for "How it Works" and build instructions.
  - Reorganized content for better flow (e.g., development setup moved before installation).
  - Removed outdated sections (Key Components, Development Commands).
  - Clarifications on performance impact with large datasets and Chrome compatibility.
  - Refinements to the "Limitations" section regarding search functionality.
  - Fixes for formatting issues (e.g., `[Important]` banner).
  - Add screenshot for usage over time
- `docs`: Removed duplicate JSDoc comments in `chartHelper.js`.

#### üõ†Ô∏è Chores & Build

- `chore`: Removed the service worker from `manifest.json`.
- `chore`: Added MiniSearch as a project dependency.
- `build`: Removed hash from chunk file naming in Vite configuration for more consistent build outputs.
- Numerous `style` commits to format the codebase using Prettier, including README files.

#### üé® UI/UX Improvements

- `ux`: Ensured consistency in sorting options presented to the user.
- `ui`: Added a maximum width of 550px for the conversation prompt preview to improve readability.
- `ux`: Made the "Relevance" sorting option consistently appear when search is active (later refined by dynamic sort switching).
